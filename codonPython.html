

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>codonPython package &mdash; codon 0.0.21 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="codonPython" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> codon
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">codonPython</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">codonPython package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.age_bands">codonPython.age_bands module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-check-consistent-measures-module">codonPython.check_consistent_measures module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-check-consistent-submissions-module">codonPython.check_consistent_submissions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-check-nat-val-module">codonPython.check_nat_val module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-check-null-module">codonPython.check_null module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-datevalidator-module">codonPython.dateValidator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.file_utils">codonPython.file_utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.mesh">codonPython.mesh module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-usage">Example usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.nhsd_colours">codonPython.nhsd_colours module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.nhsNumber">codonPython.nhsNumber module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.ODS_lookup">codonPython.ODS_lookup module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.suppression">codonPython.suppression module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython.tableFromSql">codonPython.tableFromSql module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codonpython-tolerance-module">codonPython.tolerance module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-codonPython">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">codon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">codonPython</a> &raquo;</li>
        
      <li>codonPython package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/codonPython.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="codonpython-package">
<h1>codonPython package<a class="headerlink" href="#codonpython-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-codonPython.age_bands">
<span id="codonpython-age-bands-module"></span><h2>codonPython.age_bands module<a class="headerlink" href="#module-codonPython.age_bands" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.age_bands.age_band_10_years">
<code class="sig-prename descclassname">codonPython.age_bands.</code><code class="sig-name descname">age_band_10_years</code><span class="sig-paren">(</span><em class="sig-param">age: int</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#codonPython.age_bands.age_band_10_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Place age into appropriate 10 year band</p>
<p>This function takes the age supplied as an argument and returns a string
representing the relevant 10 year banding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>age</strong> (<em>int</em>) – Age of the person</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – The 10 year age band</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_10_years</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;0-9&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_10_years</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;Age not known&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_10_years</span><span class="p">(</span><span class="mi">95</span><span class="p">)</span>
<span class="go">&#39;90 and over&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="codonPython.age_bands.age_band_5_years">
<code class="sig-prename descclassname">codonPython.age_bands.</code><code class="sig-name descname">age_band_5_years</code><span class="sig-paren">(</span><em class="sig-param">age: int</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#codonPython.age_bands.age_band_5_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Place age into appropriate 5 year band</p>
<p>This function takes the age supplied as an argument and returns a string
representing the relevant 5 year banding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>age</strong> (<em>int</em>) – Age of the person</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – The 5 year age band</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_5_years</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;0-4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_5_years</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;Age not known&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age_band_5_years</span><span class="p">(</span><span class="mi">95</span><span class="p">)</span>
<span class="go">&#39;90 and over&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="codonpython-check-consistent-measures-module">
<h2>codonPython.check_consistent_measures module<a class="headerlink" href="#codonpython-check-consistent-measures-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="codonpython-check-consistent-submissions-module">
<h2>codonPython.check_consistent_submissions module<a class="headerlink" href="#codonpython-check-consistent-submissions-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="codonpython-check-nat-val-module">
<h2>codonPython.check_nat_val module<a class="headerlink" href="#codonpython-check-nat-val-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="codonpython-check-null-module">
<h2>codonPython.check_null module<a class="headerlink" href="#codonpython-check-null-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="codonpython-datevalidator-module">
<h2>codonPython.dateValidator module<a class="headerlink" href="#codonpython-datevalidator-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-codonPython.file_utils">
<span id="codonpython-file-utils-module"></span><h2>codonPython.file_utils module<a class="headerlink" href="#module-codonPython.file_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.file_utils.compare">
<code class="sig-prename descclassname">codonPython.file_utils.</code><code class="sig-name descname">compare</code><span class="sig-paren">(</span><em class="sig-param">x, y, names=['x', 'y'], dups=False, same=False, comment=False</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.file_utils.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a dictionary with:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Same values between data frames x and y</p></li>
<li><p>Values in x, not in y</p></li>
<li><p>Values in y, not in x</p></li>
</ol>
<p>(optional):
(4) Duplicates of x
(5) Duplicates of y
(6) Boolean of whether x and y are the same</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pandas.DataFrame</em>) – DataFrame #1</p></li>
<li><p><strong>y</strong> (<em>pandas.DataFrame</em>) – DataFrame #2</p></li>
<li><p><strong>names</strong> (<em>list</em>) – a list of user preferred file names
e.g. [‘File1’, ‘File2’]
default = [‘x’,’y’]</p></li>
<li><p><strong>dups</strong> (<em>bool</em>) – True to include duplicates check for each file
default = False</p></li>
<li><p><strong>same</strong> (<em>bool</em>) – True to activate. Outputs True if DataFrames are the same
default = False</p></li>
<li><p><strong>comment</strong> (<em>bool</em>) – True to activate. Prints out statistics of the compariosn results
e.g. number of same valeus, number of duplicates, number of outliers and whether the DataFrames are the same
default = False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>‘&gt;&gt;&gt; c = compare(df1, df2, names = [‘df1’,’df2’], dups = True, same = True, comment =True)’</p>
<p>There are 133891 same values
There are 16531 outliers in df1
There are 20937 outliers in df2
There are 48704 duplicates in df1
There are 0 duplicates in df2
The DataFrames are not the same</p>
<p>‘&gt;&gt;&gt; c = compare(df2, df2, names = [‘df2’,’df2’], dups = True, same = True, comment =True)’</p>
<p>There are 154444 same values
There are 0 outliers in df2
There are 0 outliers in df2
There are 0 duplicates in df2
There are 0 duplicates in df2
The DataFrames are the same</p>
</dd></dl>

<dl class="function">
<dt id="codonPython.file_utils.file_search">
<code class="sig-prename descclassname">codonPython.file_utils.</code><code class="sig-name descname">file_search</code><span class="sig-paren">(</span><em class="sig-param">path='.', doctype='csv', like=[''], strict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.file_utils.file_search" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates a list of all files of a certain type, satisfying the criteria outlined
in like = […] parameter. The function only searches for files in the specified folder
of the current working directory that is set by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – Path to a folder in the current working directory
default = ‘.’, i.e. current working directory folder</p></li>
<li><p><strong>doctype</strong> (<em>string</em>) – Document format to search for
e.g. ‘csv’ or ‘xlsx’
default = ‘csv’</p></li>
<li><p><strong>like</strong> (<em>list</em>) – A list of words to filter the file search on
default = [‘’], i.e. no filter</p></li>
<li><p><strong>strict</strong> (<em>bool</em>) – Set True to search for filenames containing all words from ‘like’ list (
default = False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_search</span><span class="p">(</span><span class="n">doctype</span> <span class="o">=</span> <span class="s1">&#39;md&#39;</span><span class="p">)</span>
<span class="go">[&#39;README.md&#39;, &#39;CONTRIBUTING.md&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_search</span><span class="p">(</span><span class="n">doctype</span> <span class="o">=</span> <span class="s1">&#39;md&#39;</span><span class="p">,</span> <span class="n">like</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">])</span>
<span class="go">[&#39;README.md&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="codonPython.file_utils.import_files">
<code class="sig-prename descclassname">codonPython.file_utils.</code><code class="sig-name descname">import_files</code><span class="sig-paren">(</span><em class="sig-param">path='.', doctype='csv', sheet='Sheet1', subdir=False, like=[''], strict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.file_utils.import_files" title="Permalink to this definition">¶</a></dt>
<dd><p>This function imports all documents of a given format to a dictionary
and returns this dictionary, keeping original file names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – Path to a folder in the current working directory
default = ‘.’, i.e. current working directory folder</p></li>
<li><p><strong>doctype</strong> (<em>string</em>) – Document format to search for
e.g. ‘csv’ or ‘xlsx’
default = ‘csv’</p></li>
<li><p><strong>sheet</strong> (<em>string</em>) – Sheet name of the xlsx file
default = ‘Sheet1’</p></li>
<li><p><strong>subdir</strong> (<em>bool</em>) – True to allow download all files, including the subdirectories
default = False</p></li>
<li><p><strong>like</strong> (<em>list</em>) – A list of words to filter the file search on
default = [‘’], i.e. no filter</p></li>
<li><p><strong>strict</strong> (<em>bool</em>) – Set True to search for filenames containing all words from ‘like’ list
default = False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>‘&gt;&gt;&gt; import_files()’</p>
<p>File Data_AprF_2019 is successfully imported</p>
<p>File Data_AugF_2019 is successfully imported</p>
<p>File Data_JulF_2019 is successfully imported</p>
<p>File Data_JunF_2019_v1 is successfully imported</p>
<p>File Data_MayF_2019 is successfully imported</p>
<p>File Data_SepP_2019 is successfully imported</p>
<p>‘&gt;&gt;&gt; import_files(like = [‘Aug’,’Sep’])’</p>
<p>File Data_AugF_2019 is successfully imported</p>
<p>File Data_SepP_2019 is successfully imported</p>
</dd></dl>

</div>
<div class="section" id="module-codonPython.mesh">
<span id="codonpython-mesh-module"></span><h2>codonPython.mesh module<a class="headerlink" href="#module-codonPython.mesh" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="codonPython.mesh.MESHConnection">
<em class="property">class </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHConnection</code><span class="sig-paren">(</span><em class="sig-param">mailbox: str</em>, <em class="sig-param">password: str</em>, <em class="sig-param">api_shared_key: str</em>, <em class="sig-param">cert_loc: str</em>, <em class="sig-param">key_loc: str</em>, <em class="sig-param">base_ca_loc: str</em>, <em class="sig-param">root_url: str = 'https://mesh-sync.national.ncrs.nhs.uk'</em>, <em class="sig-param">org: str = 'NHS Digital'</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for handling MESH API interactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mailbox</strong> (<em>string</em>) – The MESH ID of the mailbox this client is for</p></li>
<li><p><strong>password</strong> (<em>string</em>) – The password to this mailbox</p></li>
<li><p><strong>api_shared_key</strong> (<em>string</em>) – The shared API key for the MESH environment the mailbox is in</p></li>
<li><p><strong>cert_loc</strong> (<em>string</em>) – Path to the MESH API certificate location</p></li>
<li><p><strong>key_loc</strong> (<em>string</em>) – Path to the MESH API certificate private key location</p></li>
<li><p><strong>base_ca_loc</strong> (<em>string</em>) – Path to the base MESH certificate authority certificate bundle.
Set to False to disable inbound SSL checks if necessary</p></li>
<li><p><strong>root_url</strong> (string, default = “<a class="reference external" href="https://mesh-sync.national.ncrs.nhs.uk">https://mesh-sync.national.ncrs.nhs.uk</a>”) – Root MESH URL. Default value is the live MESH service</p></li>
<li><p><strong>org</strong> (<em>string</em><em>, </em><em>default = &quot;NHS Digital&quot;</em>) – Name of organisation owning the mailbox</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="codonPython.mesh.MESHConnection.check_authentication">
<code class="sig-name descname">check_authentication</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#codonPython.mesh.MESHConnection.check_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Check authentication with the MESH API.
This should be done at the start of any session (per the API docs)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Indicates if authentication was successful or not</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">check_authentication</span><span class="p">()</span> 
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.send_file">
<code class="sig-name descname">send_file</code><span class="sig-paren">(</span><em class="sig-param">dest_mailbox: str</em>, <em class="sig-param">message_location: str</em>, <em class="sig-param">workflow_id: str</em>, <em class="sig-param">message_subject: str = None</em>, <em class="sig-param">message_id: str = None</em>, <em class="sig-param">process_id: str = None</em>, <em class="sig-param">compress_message: bool = True</em>, <em class="sig-param">encrypted: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHConnection.send_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a file to the MESH API.
This will automatically chunk the message if required, splitting into chunks at 80MB (MESH API has a
chunk size limit of 100MB). If required, this will also compress the message before transmission using
gzip.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest_mailbox</strong> (<em>string</em>) – MESH Mailbox ID of the recipient</p></li>
<li><p><strong>message_location</strong> (<em>string</em>) – Path to the readable file to send as a message</p></li>
<li><p><strong>workflow_id</strong> (<em>string</em>) – DTS Workflow ID</p></li>
<li><p><strong>message_subject</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional subject line to use for the message, for SMTP (email) messages.</p></li>
<li><p><strong>message_id</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional local identifier for the message. Required to track the message later.</p></li>
<li><p><strong>process_id</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional process ID for the MESH message. Currently not used in MESH, but included to ensure
future compatibility.</p></li>
<li><p><strong>compress_message</strong> (<em>boolean</em><em>, </em><em>default = True</em>) – Indicates if the message should be compressed. If true, then the message will be compressed
using gzip before sending to MESH.</p></li>
<li><p><strong>encrypted</strong> (<em>boolean</em><em>, </em><em>default = False</em>) – Indicates if the file to send has been encrypted. This is solely used to pass a flag to MESH
and does not encrypt the file or otherwise alter processing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Dictionary of returned values from the MESH API</p>
<ul class="simple">
<li><p>messageID (str): value of the MESH internal ID assigned to the sent message</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHInvalidRecipient" title="codonPython.mesh.MESHInvalidRecipient"><strong>MESHInvalidRecipient</strong></a> – The mailbox ID provided is not a valid recipient for this message</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span><span class="s2">&quot;TEST&quot;</span><span class="p">,</span> <span class="s1">&#39;c:/test/test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;test_flow&#39;</span><span class="p">)</span> 
<span class="go">{&#39;messageID&#39;: &#39;20200211115928515346_9359E2&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.send_message">
<code class="sig-name descname">send_message</code><span class="sig-paren">(</span><em class="sig-param">dest_mailbox: str</em>, <em class="sig-param">message: bytes</em>, <em class="sig-param">filename: str</em>, <em class="sig-param">workflow_id: str</em>, <em class="sig-param">message_subject: str = None</em>, <em class="sig-param">message_id: str = None</em>, <em class="sig-param">process_id: str = None</em>, <em class="sig-param">compress_message: bool = True</em>, <em class="sig-param">encrypted: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHConnection.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to the MESH API.
This will automatically chunk the message if required, splitting into chunks at 80MB (MESH API has a
chunk size limit of 100MB). If required, this will also compress the message before transmission using
gzip.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest_mailbox</strong> (<em>string</em>) – MESH Mailbox ID of the recipient</p></li>
<li><p><strong>message</strong> (<em>bytes</em>) – Bytes representation of the file to transmit</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – Original filename for the message being transmitted</p></li>
<li><p><strong>workflow_id</strong> (<em>string</em>) – DTS Workflow ID</p></li>
<li><p><strong>message_subject</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional subject line to use for the message, for SMTP (email) messages.</p></li>
<li><p><strong>message_id</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional local identifier for the message. Required to track the message later.</p></li>
<li><p><strong>process_id</strong> (<em>string</em><em>, </em><em>default = None</em>) – Optional process ID for the MESH message. Currently not used in MESH, but included to ensure
future compatibility.</p></li>
<li><p><strong>compress_message</strong> (<em>boolean</em><em>, </em><em>default = True</em>) – Indicates if the message should be compressed. If true, then the message will be compressed
using gzip before sending to MESH.</p></li>
<li><p><strong>encrypted</strong> (<em>boolean</em><em>, </em><em>default = False</em>) – Indicates if the file to send has been encrypted. This is solely used to pass a flag to MESH
and does not encrypt the file or otherwise alter processing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Dictionary of returned values from the MESH API</p>
<ul class="simple">
<li><p>messageID (str): value of the MESH internal ID assigned to the sent message</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHInvalidRecipient" title="codonPython.mesh.MESHInvalidRecipient"><strong>MESHInvalidRecipient</strong></a> – The mailbox ID provided is not a valid recipient for this message</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;TEST&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;test_flow&#39;</span><span class="p">)</span> 
<span class="go">{&#39;messageID&#39;: &#39;20200211115928515346_9359E2&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.check_message_status">
<code class="sig-name descname">check_message_status</code><span class="sig-paren">(</span><em class="sig-param">message_id: str</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#codonPython.mesh.MESHConnection.check_message_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check status of a sent message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message_id</strong> (<em>string</em>) – The local message ID, eg. as provided to send_message. Does NOT work with MESH Message IDs, only
the local ID optionally provided on sending the message.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The full response from the MESH API for this local ID. For details, consult the MESH API documentation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHMultipleMatches" title="codonPython.mesh.MESHMultipleMatches"><strong>MESHMultipleMatches</strong></a> – There are multiple messages in the outbox with this local ID</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">check_message_status</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> 
<span class="go">{&quot;statusSuccess&quot;: ...}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.check_inbox">
<code class="sig-name descname">check_inbox</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#codonPython.mesh.MESHConnection.check_inbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the MESH IDs of the contents of the inbox.
This will return at most 500 entries, owing to the limitations of the API.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The MESH IDs of the messages in the inbox (str)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">check_inbox</span><span class="p">()</span> 
<span class="go">[&quot;20200211115754892283_BC7B68&quot;, &quot;20200211115928515346_9359E2&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.check_inbox_count">
<code class="sig-name descname">check_inbox_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#codonPython.mesh.MESHConnection.check_inbox_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine how many messages are in the MESH mailbox to download.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of messages ready to download</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">check_inbox_count</span><span class="p">()</span> 
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.check_and_download">
<code class="sig-name descname">check_and_download</code><span class="sig-paren">(</span><em class="sig-param">save_folder: str = None</em>, <em class="sig-param">recursive: bool = True</em><span class="sig-paren">)</span> &#x2192; Optional[Generator[[dict, None], None]]<a class="headerlink" href="#codonPython.mesh.MESHConnection.check_and_download" title="Permalink to this definition">¶</a></dt>
<dd><p>Download all messages in the inbox.
This will automatically handle reconstructing chunked messages, and automatically decompress any messages
which have Content-Encoding value of gzip.
WARNING: each downloaded message will be fully reconstructed and decompressed if needed. This may cause
issue for machines with very limited memory if there are very large files to download.</p>
<p>If save_folder is provided, then downloaded files will be saved into that folder with their original filenames
(and non-delivery receipts will be saved there). This may cause issue if there are multiple files with the
same filename.</p>
<p>If no save_folder is provided, then this function will return a generator which will yield each message in turn.
When the generator yields a message, it will send an acknowledgement to the MESH API for the previous
message; it is important that processing of the messages be complete and any required final outputs saved
before this - once acknowledged a message cannot be downloaded from MESH again.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_folder</strong> (<em>string</em><em>, </em><em>default = None</em>) – <p>If provided, the folder to save all downloaded files to when this function is called. The function
will not yield intermediate results.</p>
<ul>
<li><p>For data files, the file will be saved in this folder with its original filename.</p></li>
<li><p>For non-delivery reports, there will be a file created in the folder with filename
‘Non delivery report: (MESH message ID of failed delivery).txt’, and with
content ‘Message not delivered. All known details below’ followed by the full
dictionary of headers from the download response.</p></li>
</ul>
<p>If not provided, then this function will instead yield results as documented below.</p>
</p></li>
<li><p><strong>recursive</strong> (<em>boolean</em><em>, </em><em>default = True</em>) – If true, then this method will be called recursively so long as there are more than 500 messages
in the inbox, the maximum number of messages the MESH API will provide IDs for at once. If false,
then only one call will be made to retrieve inbox contents, and at most 500 messages will be downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>dict</em> – Dictionary of details about the downloaded file.</p>
<ul class="simple">
<li><p>filename (str): Filename of the original file (if provided).</p></li>
<li><p>contents (bytes): Contents of the file (reconstructed and decompressed if necessary).</p></li>
<li><p>headers (dict): Dictionary of headers returned by MESH on the initial download request.
For full details see the MESH API documentation.</p></li>
<li><p>datafile (boolean): Indicates if this was a data file or a non-delivery report.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing the inbox. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API when accessing the inbox</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHDownloadErrors" title="codonPython.mesh.MESHDownloadErrors"><strong>MESHDownloadErrors</strong></a> – There were errors during the download process. This exception has the attribute ‘exceptions’,
    which contains a full list of messages which generated exceptions, along with the exception.
    This is only raised after completion of all non-error downloads, and downloads which raise
    an exception are not acknowledged to the MESH API.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">check_and_download</span><span class="p">(</span><span class="s2">&quot;C:/Test Folder/&quot;</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">check_and_download</span><span class="p">():</span> 
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> 
<span class="go">{&#39;filename&#39;: &#39;test.txt&#39;, &#39;contents&#39;: b&#39;test_message&#39;, &#39;headers&#39;: {...}, datafile: True}</span>
<span class="go">{&#39;filename&#39;: &#39;test2.txt&#39;, &#39;contents&#39;: b&#39;test_message_2&#39;, &#39;headers&#39;: {...}, datafile: True}</span>
<span class="go">{&#39;filename&#39;: None, &#39;contents&#39;: b&#39;&#39;, &#39;headers&#39;: {&#39;Mex-Linkedmsgid&#39;: &#39;1234567890&#39;, ...}, datafile: False}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.download_message">
<code class="sig-name descname">download_message</code><span class="sig-paren">(</span><em class="sig-param">message_id: str</em>, <em class="sig-param">save_folder: str = None</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#codonPython.mesh.MESHConnection.download_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Request a message from the MESH API.
This will automatically handle reconstructing chunked messages, and automatically decompress any messages
which have Content-Encoding value of gzip.
WARNING: the full, reconstructed message will be held in memory, including after decompression. This may
cause problems, if you are using the API to download very large files on a machine with very limited memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_id</strong> (<em>string</em>) – The internal MESH ID of the message to download</p></li>
<li><p><strong>save_folder</strong> (<em>string</em><em>, </em><em>default = None</em>) – <p>Optional, the folder to save the downloaded message to. If not provided, then the files are not saved.</p>
<ul>
<li><p>For data files, the file will be saved in this folder with its original filename.</p></li>
<li><p>For non-delivery reports, there will be a file created in the folder with filename
‘Non delivery report: (MESH message ID of failed delivery).txt’, and with
content ‘Message not delivered. All known details below’ followed by the full
dictionary of headers from the download response.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Dictionary of details about the downloaded file.</p>
<ul class="simple">
<li><p>filename (str): Filename of the original file (if provided).</p></li>
<li><p>contents (bytes): Contents of the file (reconstructed and decompressed if necessary).</p></li>
<li><p>headers (dict): Dictionary of headers returned by MESH on the initial download request.
For full details see the MESH API documentation.</p></li>
<li><p>datafile (boolean): Indicates if this was a data file or a non-delivery report.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHMessageMissing" title="codonPython.mesh.MESHMessageMissing"><strong>MESHMessageMissing</strong></a> – There is no message with the provided message ID in the mailbox</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHMessageAlreadyDownloaded" title="codonPython.mesh.MESHMessageAlreadyDownloaded"><strong>MESHMessageAlreadyDownloaded</strong></a> – The message with the provided message ID has already been downloaded and acknowledged</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">download_message</span><span class="p">(</span><span class="s2">&quot;20200211115754892283_BC7B68&quot;</span><span class="p">,</span> <span class="s2">&quot;C:/Test Folder/&quot;</span><span class="p">)</span> 
<span class="go">{&#39;filename&#39;: &#39;test.txt&#39;, &#39;contents&#39;: b&#39;test_message&#39;, &#39;headers&#39;: {&#39;Mex-Filename&#39;: &#39;test.txt&#39;, ...}, data: True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">download_message</span><span class="p">(</span><span class="s2">&quot;20200211115754892283_BC7B69&quot;</span><span class="p">)</span> 
<span class="go">{&#39;filename&#39;: None, &#39;contents&#39;: b&#39;&#39;, &#39;headers&#39;: {&#39;Mex-Linkedmsgid&#39;: &#39;1234567890&#39;, ...}, data: False}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="codonPython.mesh.MESHConnection.ack_download_message">
<code class="sig-name descname">ack_download_message</code><span class="sig-paren">(</span><em class="sig-param">message_id: str</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#codonPython.mesh.MESHConnection.ack_download_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Send acknowledgement to the MESH API that a message has finished downloading.
This should only be done after the message has successfully been saved -
once sent, the message is remvoed from the MESH server.
Per the API, this must be sent once a message has been successfully processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message_id</strong> (<em>string</em>) – The internal MESH ID of the downloaded message</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#codonPython.mesh.MESHAuthenticationError" title="codonPython.mesh.MESHAuthenticationError"><strong>MESHAuthenticationError</strong></a> – There was an authentication error accessing this page. Either the SSL certificate used is invalid,
    or the client provided the wrong Mailbox ID, Password, or Shared Key.</p></li>
<li><p><a class="reference internal" href="#codonPython.mesh.MESHUnknownError" title="codonPython.mesh.MESHUnknownError"><strong>MESHUnknownError</strong></a> – There was an unexpected return status from the MESH API</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span><span class="o">.</span><span class="n">ack_download_message</span><span class="p">(</span><span class="s2">&quot;20200211115754892283_BC7B68&quot;</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="codonPython.mesh.generate_authorization">
<code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">generate_authorization</code><span class="sig-paren">(</span><em class="sig-param">mailbox: str</em>, <em class="sig-param">password: str</em>, <em class="sig-param">api_shared_key: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#codonPython.mesh.generate_authorization" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an authorization string as specified by the MESH API documentation v1.14</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mailbox</strong> (<em>string</em>) – The mailbox ID to generate authorization for</p></li>
<li><p><strong>password</strong> (<em>string</em>) – The password for the mailbox</p></li>
<li><p><strong>api_shared_key</strong> (<em>string</em>) – The shared API key for the MESH environment the request is being made to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The generated authentication string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">generate_authorization</span><span class="p">(</span><span class="s2">&quot;TEST_BOX&quot;</span><span class="p">,</span> <span class="s2">&quot;TEST_PW&quot;</span><span class="p">,</span> <span class="s2">&quot;TEST_KEY&quot;</span><span class="p">)</span> 
<span class="go">&quot;NHSMESH TEST_BOX:ccd54b96-ee41-4d34-9700-7f9ec63d0720:1:202002120857:763 ... 872c&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">generate_authorization</span><span class="p">(</span><span class="s2">&quot;NEW_BOX&quot;</span><span class="p">,</span> <span class="s2">&quot;NEW_PW&quot;</span><span class="p">,</span> <span class="s2">&quot;TEST_KEY&quot;</span><span class="p">)</span> 
<span class="go">&quot;NHSMESH NEW_BOX:662c4ffa-c85c-4858-bae8-7327e09aeeb5:1:202002120858:7f1 ... 0d95&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHAuthenticationError">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHAuthenticationError</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHAuthenticationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>The MESH request authentication was invalid</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHDownloadErrors">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHDownloadErrors</code><span class="sig-paren">(</span><em class="sig-param">exceptions</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHDownloadErrors" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>There were errors downloading MESH messages</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHInvalidRecipient">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHInvalidRecipient</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHInvalidRecipient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>The recipient is unknown or otherwise invalid</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHMessageAlreadyDownloaded">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHMessageAlreadyDownloaded</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHMessageAlreadyDownloaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>The MESH request has already been downloaded</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHMessageMissing">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHMessageMissing</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHMessageMissing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>The message requested does not exist</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHMultipleMatches">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHMultipleMatches</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHMultipleMatches" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>There are multiple messages with the provided local ID</p>
</dd></dl>

<dl class="exception">
<dt id="codonPython.mesh.MESHUnknownError">
<em class="property">exception </em><code class="sig-prename descclassname">codonPython.mesh.</code><code class="sig-name descname">MESHUnknownError</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.mesh.MESHUnknownError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">requests.exceptions.ConnectionError</span></code></p>
<p>There was an unknown error with the connection</p>
</dd></dl>

<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>Using the MESH API requires a valid API certificate issued by DIR (for live environments) or Platforms (for development/test environments).
Guidance on obtaining a certificate can be found <a class="reference external" href="https://digital.nhs.uk/services/message-exchange-for-social-care-and-health-mesh/mesh-guidance-hub/certificate-guidance">in the MESH guidance hub</a>.
The module requires the certificate be in PEM format; the certificate enrolment tool produces a java keystore which the valid certificate can be extracted from if needs be.
Due to limitations inherited from the Requests library, the private key <em>must</em> be unencrypted.</p>
<p>The keystore will also contain root authority certificates; these should also be extracted and combined into a certificate bundle for use in confirming the identity of the endpoint being communicated with. This check <em>can</em> be disabled, but this is not recommended.</p>
<p>Finally, use of the MESH API requires the API secret key, which can be requested from Platforms.</p>
</div>
<div class="section" id="example-usage">
<h3>Example usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h3>
<p>Use of the MESH API will generally follow one of a few standard patterns.</p>
<p>Upload file pattern:</p>
<ul class="simple">
<li><p>Check Authentication with the MESH API endpoint</p></li>
<li><p>Send one or more files (chunked if needed)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">codonPython.mesh</span> <span class="kn">import</span> <span class="n">MESHConnection</span>
<span class="n">mesh_client</span> <span class="o">=</span> <span class="n">MESHConnection</span><span class="p">(</span>
    <span class="n">mailbox</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">api_shared_key</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">cert_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.cert&#39;</span>
    <span class="n">key_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.key&#39;</span>
    <span class="n">base_ca_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.ca-bundle&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">mesh_client</span><span class="o">.</span><span class="n">check_authentication</span><span class="p">():</span>
    <span class="n">mesh_client</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span><span class="s1">&#39;test_recipient&#39;</span><span class="p">,</span> <span class="s1">&#39;./test/test_20200224_1100.txt.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;test_workflow&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Download file pattern:</p>
<ul class="simple">
<li><p>Check Authentication with the MESH API endpoint</p></li>
<li><p>Request a list of files to download from the endpoint</p></li>
<li><p>Download and process each in turn (downloading chunked files if needed)</p></li>
<li><p>After each file has been <em>successfully</em> processed, send acknowledgement to the MESH API for that file</p></li>
<li><p>Repeat as needed until there are no more files which can be processed. Note that the MESH API will return at most 500 message IDs at a time.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">codonPython.mesh</span> <span class="kn">import</span> <span class="n">MESHConnection</span>
<span class="n">mesh_client</span> <span class="o">=</span> <span class="n">MESHConnection</span><span class="p">(</span>
    <span class="n">mailbox</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">api_shared_key</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">cert_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.cert&#39;</span>
    <span class="n">key_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.key&#39;</span>
    <span class="n">base_ca_loc</span> <span class="o">=</span> <span class="s1">&#39;./certs/test.ca-bundle&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">mesh_client</span><span class="o">.</span><span class="n">check_authentication</span><span class="p">():</span>
    <span class="c1"># To save all messages to a folder</span>
    <span class="n">mesh_client</span><span class="o">.</span><span class="n">check_and_download</span><span class="p">(</span><span class="s1">&#39;./inbox&#39;</span><span class="p">)</span>
    <span class="c1"># To perform more complex processing on each</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">mesh_client</span><span class="o">.</span><span class="n">check_and_download</span><span class="p">():</span>
        <span class="n">process</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="c1"># To perform the flow manually instead of using the check_and_download helper method</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">inbox_messages</span> <span class="o">=</span> <span class="n">mesh_client</span><span class="o">.</span><span class="n">check_inbox</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">message_id</span> <span class="ow">in</span> <span class="n">inbox_messages</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">mesh_client</span><span class="o">.</span><span class="n">download_message</span><span class="p">(</span><span class="n">message_id</span><span class="p">,</span> <span class="s1">&#39;./inbox&#39;</span><span class="p">)</span>
            <span class="n">process</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">mesh_client</span><span class="o">.</span><span class="n">ack_download_message</span><span class="p">(</span><span class="n">message_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>NB:
The regular MESH client has strict restrictions on filename and type. The API does not have any such restrictions, however it is likely that the system files are being sent to expects files to be in this format.
Unless you know otherwise files should be sent with .dat extension, with filename pattern Organisation_Date_Time.ext.dat where .ext is the original file extension.</p>
</div>
</div>
<div class="section" id="module-codonPython.nhsd_colours">
<span id="codonpython-nhsd-colours-module"></span><h2>codonPython.nhsd_colours module<a class="headerlink" href="#module-codonPython.nhsd_colours" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.nhsd_colours.nhsd_colours">
<code class="sig-prename descclassname">codonPython.nhsd_colours.</code><code class="sig-name descname">nhsd_colours</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.nhsd_colours.nhsd_colours" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary full of the different official NHSD colours from the
style guide:
<a class="reference external" href="https://digital.nhs.uk/about-nhs-digital/corporate-information-and-documents/nhs-digital-style-guidelines/how-we-look/colour-palette">https://digital.nhs.uk/about-nhs-digital/corporate-information-and-documents/nhs-digital-style-guidelines/how-we-look/colour-palette</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>colour_dict</strong> – A dictionary containing sets of official NHS Digital branding colours
(Hexidecimal format) and fonts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict (Python dictionary)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="codonPython.nhsd_colours.nhsd_seaborn_style">
<code class="sig-prename descclassname">codonPython.nhsd_colours.</code><code class="sig-name descname">nhsd_seaborn_style</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.nhsd_colours.nhsd_seaborn_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the seaborn style to be inline with NHSD guidlines. This means your
graphs in Seaborn, or in Matplotlib will come out looking as per the NHSD
style guide. Simply run this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-codonPython.nhsNumber">
<span id="codonpython-nhsnumber-module"></span><h2>codonPython.nhsNumber module<a class="headerlink" href="#module-codonPython.nhsNumber" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.nhsNumber.nhsNumberGenerator">
<code class="sig-prename descclassname">codonPython.nhsNumber.</code><code class="sig-name descname">nhsNumberGenerator</code><span class="sig-paren">(</span><em class="sig-param">to_generate: int</em>, <em class="sig-param">random_state: int = None</em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#codonPython.nhsNumber.nhsNumberGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates up to 1M random NHS numbers compliant with modulus 11 checks as recorded
in the data dictonary.
<a class="reference external" href="https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp?shownav=1">https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp?shownav=1</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>to_generate</strong> (<em>int</em>) – number of NHS numbers to generate</p></li>
<li><p><strong>random_state</strong> (<em>int</em><em>, </em><em>default : None</em>) – Optional seed for random number generation, for testing and reproducibility.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>generated</strong> – List of randomly generated NHS numbers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nhsNumberGenerator</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="go">[8429141456, 2625792787]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="codonPython.nhsNumber.nhsNumberValidator">
<code class="sig-prename descclassname">codonPython.nhsNumber.</code><code class="sig-name descname">nhsNumberValidator</code><span class="sig-paren">(</span><em class="sig-param">number: int</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#codonPython.nhsNumber.nhsNumberValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate NHS Number according to modulus 11 checks as recorded in the data dictionary.
<a class="reference external" href="https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp?shownav=1">https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp?shownav=1</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number</strong> (<em>int</em>) – 10 digit integer to validate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If the number passes modulus 11 checks a.k.a. is valid.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nhsNumberValidator</span><span class="p">(</span><span class="mi">8429141456</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nhsNumberValidator</span><span class="p">(</span><span class="mi">8429141457</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-codonPython.ODS_lookup">
<span id="codonpython-ods-lookup-module"></span><h2>codonPython.ODS_lookup module<a class="headerlink" href="#module-codonPython.ODS_lookup" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.ODS_lookup.get_addresses">
<code class="sig-prename descclassname">codonPython.ODS_lookup.</code><code class="sig-name descname">get_addresses</code><span class="sig-paren">(</span><em class="sig-param">codes: Iterable[str]</em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="headerlink" href="#codonPython.ODS_lookup.get_addresses" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the ODS (organisation data service) API for a series of
org codes and return a data frame containing names and addresses.
Invalid codes will cause a message to be printed but will
otherwise be ignored, as an incomplete merge table is more
useful than no table at all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>codes</strong> (<em>list</em><em>, </em><em>ndarray</em><em> or </em><em>pd.Series</em>) – 3 character organization codes to retrieve information for.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Address information for the given org codes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">get_addresses</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">&quot;X26&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="go">          Org_AddrLn1 Org_Code Org_Country     Org_Name Org_PostCode Org_Town</span>
<span class="go">0  1 TREVELYAN SQUARE      X26     ENGLAND  NHS Digital      LS1 6AE    LEEDS</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="codonPython.ODS_lookup.query_api">
<code class="sig-prename descclassname">codonPython.ODS_lookup.</code><code class="sig-name descname">query_api</code><span class="sig-paren">(</span><em class="sig-param">code: str</em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#codonPython.ODS_lookup.query_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the ODS (organisation data service) API for a single org code
and return the full JSON result. Full API docs can be found here:
<a class="reference external" href="https://digital.nhs.uk/services/organisation-data-service/guidance-for-developers/organisation-endpoint">https://digital.nhs.uk/services/organisation-data-service/guidance-for-developers/organisation-endpoint</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<em>str</em>) – 3 character organization code.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The data returned from the API.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">query_api</span><span class="p">(</span><span class="s2">&quot;X26&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;Organisation&quot;</span><span class="p">][</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span>
<span class="go">&#39;NHS DIGITAL&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;Organisation&quot;</span><span class="p">][</span><span class="s2">&quot;GeoLoc&quot;</span><span class="p">][</span><span class="s2">&quot;Location&quot;</span><span class="p">][</span><span class="s2">&quot;AddrLn1&quot;</span><span class="p">]</span>
<span class="go">&#39;1 TREVELYAN SQUARE&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-codonPython.suppression">
<span id="codonpython-suppression-module"></span><h2>codonPython.suppression module<a class="headerlink" href="#module-codonPython.suppression" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.suppression.central_suppression_method">
<code class="sig-prename descclassname">codonPython.suppression.</code><code class="sig-name descname">central_suppression_method</code><span class="sig-paren">(</span><em class="sig-param">valuein: int</em>, <em class="sig-param">rc: str = '5'</em>, <em class="sig-param">upper: int = 5000000000</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#codonPython.suppression.central_suppression_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Suppresses and rounds values using the central suppression method.</p>
<p>If value is 0 then it will remain as 0.
If value is 1-7 it will be suppressed and appear as 5.
All other values will be rounded to the nearest 5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>valuein</strong> (<em>int</em>) – Metric value</p></li>
<li><p><strong>rc</strong> (<em>str</em>) – Replacement character if value needs suppressing</p></li>
<li><p><strong>upper</strong> (<em>int</em>) – Upper limit for suppression of numbers (5 billion)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Suppressed value (5), 0 or rounded valuein if greater than 7</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">central_suppression_method</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">central_suppression_method</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="go">&#39;25&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">central_suppression_method</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;0&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-codonPython.tableFromSql">
<span id="codonpython-tablefromsql-module"></span><h2>codonPython.tableFromSql module<a class="headerlink" href="#module-codonPython.tableFromSql" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="codonPython.tableFromSql.tableFromSql">
<code class="sig-prename descclassname">codonPython.tableFromSql.</code><code class="sig-name descname">tableFromSql</code><span class="sig-paren">(</span><em class="sig-param">server: str</em>, <em class="sig-param">database: str</em>, <em class="sig-param">table_name: str</em>, <em class="sig-param">user: str = ''</em>, <em class="sig-param">password: str = ''</em>, <em class="sig-param">schema: str = None</em>, <em class="sig-param">index_col: str = None</em>, <em class="sig-param">coerce_float: bool = True</em>, <em class="sig-param">parse_dates: list = None</em>, <em class="sig-param">columns: list = None</em>, <em class="sig-param">chunksize: int = None</em><span class="sig-paren">)</span><a class="headerlink" href="#codonPython.tableFromSql.tableFromSql" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a SQL table in a DataFrame.</p>
<p>Convert a table stored in SQL Server 2016 into a pandas dataframe.
Uses sqlalchemy and pandas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server</strong> (<em>string</em>) – Name of the SQL server</p></li>
<li><p><strong>database</strong> (<em>string</em>) – Name of the SQL database</p></li>
<li><p><strong>user</strong> (<em>string</em><em>, </em><em>default: &quot;&quot;</em>) – If verification is required, name of the user</p></li>
<li><p><strong>password</strong> (<em>string</em><em>, </em><em>default: &quot;&quot;</em>) – If verification is required, password of the user</p></li>
<li><p><strong>table_name</strong> (<em>string</em>) – Name of SQL table in database.</p></li>
<li><p><strong>schema</strong> (<em>string</em><em>, </em><em>default : None</em>) – Name of SQL schema in database to query (if database flavor supports this). Uses
default schema if None (default).</p></li>
<li><p><strong>index_col</strong> (<em>string</em><em> or </em><em>list of strings</em><em>, </em><em>default : None</em>) – Column(s) to set as index(MultiIndex).</p></li>
<li><p><strong>coerce_float</strong> (<em>boolean</em><em>, </em><em>default : True</em>) – Attempts to convert values of non-string, non-numeric objects (like decimal.Decimal)
to floating point. Can result in loss of Precision.</p></li>
<li><p><strong>parse_dates</strong> (<em>list</em><em> or </em><em>dict</em><em>, </em><em>default : None</em>) – <ul>
<li><p>List of column names to parse as dates.</p></li>
<li><p>Dict of {column_name: format string} where format string is strftime compatible in</p></li>
</ul>
<p>case of parsing string times or is one of (D, s, ns, ms, us) in case of parsing
integer timestamps.
- Dict of {column_name: arg dict}, where the arg dict corresponds to the keyword
arguments of pandas.to_datetime() Especially useful with databases without native
Datetime support, such as SQLite.</p>
</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>, </em><em>default : None</em>) – List of column names to select from SQL table</p></li>
<li><p><strong>chunksize</strong> (<em>int</em><em>, </em><em>default : None</em>) – If specified, returns an iterator where chunksize is the number of rows to include
in each chunk.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe of the table requested from sql server</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># &gt;&gt;&gt; tableFromSql(“myServer2”, “myDatabase2”, “myTable2”)
# pd.DataFrame
# &gt;&gt;&gt; tableFromSql(“myServer”, “myDatabase”, “myTable”, schema=”specialSchema”, columns=[“col_1”, “col_3”])
# pd.DataFrame</p>
</dd></dl>

</div>
<div class="section" id="codonpython-tolerance-module">
<h2>codonPython.tolerance module<a class="headerlink" href="#codonpython-tolerance-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-codonPython">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-codonPython" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="codonPython" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright under BSD-3 license

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>